<!DOCTYPE html>
<html class="writer-html5" lang="it" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7. Funzioni &mdash; pyArchInit 4.0 4 documentazione</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/documentation_options.js?v=1751830d"></script>
        <script src="_static/doctools.js?v=13a9ecda"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/translations.js?v=0173e136"></script>
        <script src="_static/design-tabs.js?v=36754332"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="A proposito di questi documenti" href="about.html" />
    <link rel="index" title="Indice" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="8. Come documentare" href="come_documentare.html" />
    <link rel="prev" title="6. Le schede" href="le_schede.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pyArchInit 4.0
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Cerca documenti" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu di navigazione">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="prerequisities.html">2. Prerequisiti</a></li>
<li class="toctree-l1"><a class="reference internal" href="novit%C3%A0.html">3. Novità</a></li>
<li class="toctree-l1"><a class="reference internal" href="installazione.html">4. Installazione</a></li>
<li class="toctree-l1"><a class="reference internal" href="il_plugin.html">5. Il Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="le_schede.html">6. Le schede</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Funzioni</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#apertura-delle-schede-us-da-selezione-su-base-gis">7.1. Apertura delle schede US da selezione su base GIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizzazione-su-base-gis-dell-us-corrente">7.2. Visualizzazione su base GIS dell’US corrente</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizzazione-della-pianta-all-interno-della-scheda-us">7.3. Visualizzazione della pianta all’interno della scheda US</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creazione-in-automatico-del-codice-di-periodizzazione-dell-us">7.4. Creazione in automatico del codice di periodizzazione dell’US</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sistema-di-generazione-di-piante-composite-a-partire-dalle-query-della-scheda-us">7.5. Sistema di generazione di piante composite a partire dalle query della scheda US</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controllo-automatico-dei-rapporti-stratigrafici">7.6. Controllo automatico dei rapporti stratigrafici</a></li>
<li class="toctree-l2"><a class="reference internal" href="#esportazione-del-matrix-di-harris">7.7. Esportazione del matrix di Harris</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creazione-dell-indice-di-ordine-di-successione-stratigrafica">7.8. Creazione dell’indice di ordine di successione stratigrafica</a></li>
<li class="toctree-l2"><a class="reference internal" href="#esportazione-schede-e-indice-delle-us-in-formato-pdf">7.9. Esportazione schede e indice delle US in formato PDF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="come_documentare.html">8. Come documentare</a></li>
<li class="toctree-l1"><a class="reference internal" href="moduli.html">9. Moduli pyArchInit: Classi e Funzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">10. Bibliografia</a></li>
<li class="toctree-l1"><a class="reference internal" href="lineee_guida.html">11. Linee guida</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Menu navigazione dispositivi mobili" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyArchInit 4.0</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Naviga tra le pagine">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">7. </span>Funzioni</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/funzioni.rst.txt" rel="nofollow"> Visualizza sorgente pagina</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <figure class="align-right">
<img alt="_images/logo_3.png" src="_images/logo_3.png" />
</figure>
<section id="funzioni">
<h1><span class="section-number">7. </span>Funzioni<a class="headerlink" href="#funzioni" title="Link to this heading"></a></h1>
<p>La scheda US possiede una serie di funzioni che vanno ad automatizzare alcune delle operazioni che si compiono nel corso della catastazione ed elaborazione dei dati archeologici al fine di aumentare il controllo sull’integrità del dato e la validità dell’output. Al momento per la scheda US sono disponibili le seguenti funzioni:</p>
<ul class="simple">
<li><p>apertura delle schede US da selezione su base GIS;</p></li>
<li><p>visualizzazione su GIS della planimetria dell’US del record corrente;</p></li>
<li><p>visualizzazione della pianta all’interno della scheda US;</p></li>
<li><p>creazione in automatico del codice di periodizzazione dell’US;</p></li>
<li><p>controllo automatico dei rapporti stratigrafici;</p></li>
<li><p>esportazione del matrix;</p></li>
<li><p>creazione dell’indice di ordine di successione stratigrafica;</p></li>
<li><p>sistema di generazione di piante composite a partire dalle query della scheda US;</p></li>
<li><p>esportazione schede e indice delle US in formato PDF.</p></li>
</ul>
<p>Le funzioni sono molto importanti per poter avere una schedatura corretta delle US/USM oltre che permettere a Qgis di disegnare correttamente le singole geometrie.
Le Unità Stratigrafiche in pianta vengono disegnate dentro al layer informativo pyunitastratigrafiche che contiene solo il limite dell’US e le sue caratterizzazioni (Vedi il paragrafo dedicato al layer informativo pyunitastratigrafiche).
Per generare piante composite, pyArchInit prevede una generazione in automatico a partire da query eseguite sulla scheda US e disegnatte su Qgis. Il disegno avviene tramite pyarchinit_us_view, che collega le geometrie delle US con i dati della scheda US.</p>
<p>Tuttavia Qgis non è in grado di disegnare le US nel loro ordine stratigrafico. Per fare questo esiste un campo apposito «order layer», contenuto nela scheda US che gestisce in Qgis l’ordine di disegno: le più antiche sotto, le più recenti sopra. Per poter assegnare l’indice di ordinamento pyArchInit dispone di uno script che leggendo i rapporti stratigrafici, assegna l’indice. Per poter assegnare l’indice è fondamentale che i rapporti stratigrafici non contengano errori.</p>
<p>Per arrivare ad una schedatura perfetta è bene eseguire il Controllo automatico dei rapporti stratigrafici e generare il Matrix per poter verificare che la schedatura non contenga errori.</p>
<section id="apertura-delle-schede-us-da-selezione-su-base-gis">
<h2><span class="section-number">7.1. </span>Apertura delle schede US da selezione su base GIS<a class="headerlink" href="#apertura-delle-schede-us-da-selezione-su-base-gis" title="Link to this heading"></a></h2>
<p>Sul livello pyarchinit_US_view eseguire una selezione nella porzione di scavo che desiderate.</p>
<figure class="align-center" id="id1">
<img alt="_images/img_3231f.png" src="_images/img_3231f.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.1 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Oppure, aprite la tabella del livello e utilizzate il query builder di Qgis per realizzare la ricerca che desiderate: in questo caso abbiamo selezionato uno scavo archeologico e tutte le US che per definizione stratigrafica riportano la dicitura: “struttura in muratura”.</p>
<figure class="align-center" id="id2">
<img alt="_images/img_3231g.png" src="_images/img_3231g.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.2 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id3">
<img alt="_images/img_3231h.png" src="_images/img_3231h.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.3 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id4">
<img alt="_images/img_3231i.png" src="_images/img_3231i.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.4 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Aprite la scheda US di pyArchInit e andate alla sezione Tools. A questo punto cliccate sul pulsante “Show selected Features”. La scheda aprirà i records corrispondenti alla selezione.</p>
<figure class="align-center" id="id5">
<img alt="_images/img_3231l.png" src="_images/img_3231l.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.5 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id6">
<img alt="_images/img_3231m.png" src="_images/img_3231m.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.6 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="visualizzazione-su-base-gis-dell-us-corrente">
<h2><span class="section-number">7.2. </span>Visualizzazione su base GIS dell’US corrente<a class="headerlink" href="#visualizzazione-su-base-gis-dell-us-corrente" title="Link to this heading"></a></h2>
<p>Quando ci si è posizionati sull’US che si desidera visualizzare, andare nella sezione tools e cliccare sul pulsante «Disegna US”.</p>
<figure class="align-center" id="id7">
<img alt="_images/img_3231n.png" src="_images/img_3231n.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.7 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id8">
<img alt="_images/img_3231na.png" src="_images/img_3231na.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.8 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>In Qgis verrà disegnata l’US corrispondente.</p>
<figure class="align-center" id="id9">
<img alt="_images/img_3231o.png" src="_images/img_3231o.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.9 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>!!! ATTENZIONE !!! AL MOMENTO QUESTO SISTEMA NON FUNZIONA PIU” PER MODIFICA DELLE API DI QGIS!!!</p>
</section>
<section id="visualizzazione-della-pianta-all-interno-della-scheda-us">
<h2><span class="section-number">7.3. </span>Visualizzazione della pianta all’interno della scheda US<a class="headerlink" href="#visualizzazione-della-pianta-all-interno-della-scheda-us" title="Link to this heading"></a></h2>
<p>È possibile visualizzare la pianta di una US andando nella sezione Tools e cliccando sul pulsante “Preview pianta US” apparirà un messaggio che vi avvertirà che ogni US consultata sarà caricata nell’apposita sezione.</p>
<p>Andando nella sezione “Piante” della scheda US sarà possibile visualizzare la pianta dell’US, con le caratterizzazioni e le quote. Posizionandosi sulla pianta è possibile zoomare con la rotella del mouse e selezionando lo strumento di spostamento (icona con la manina) è possibile navigare in ogni direzione.</p>
</section>
<section id="creazione-in-automatico-del-codice-di-periodizzazione-dell-us">
<h2><span class="section-number">7.4. </span>Creazione in automatico del codice di periodizzazione dell’US<a class="headerlink" href="#creazione-in-automatico-del-codice-di-periodizzazione-dell-us" title="Link to this heading"></a></h2>
<p>Dalla scheda US è possibile creare il codice di periodizzazione dell’US.</p>
<p>Come spiegato nel capitolo inerente alla scheda di Periodizzazione e nella parte della scheda US riguardante la periodizzazione,
una volta assegnato un periodo/fase iniziale all’US e un eventuale periodo finale, basta cliccare nella sezione Tools il
pulsante “Crea codice Periodo”.</p>
<figure class="align-center" id="id10">
<img alt="_images/img_3231p.png" src="_images/img_3231p.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.10 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Sarà assegnato il valore del codice periodo dalla periodizzazione finale all’iniziale, divisi da uno slash per motivi prettamente informatici. Se uno strato vive dal periodo 2.1 fino al 2.3, il codice di periodizzazione sarà: 2/3/4</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Periodo</p></th>
<th class="head"><p>Fase</p></th>
<th class="head"><p>Codice</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>2</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>3</p></td>
<td><p>4</p></td>
</tr>
</tbody>
</table>
<p>test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Risultato</span><span class="p">:</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span>
</pre></div>
</div>
<figure class="align-center" id="id11">
<img alt="_images/img_3231q.png" src="_images/img_3231q.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.11 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id11" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>La sintassi del valore inserito nel campo, serve a pyArchInit per poter realizzare le query di
richiamo delle piante di fase, attraverso una sintassi specifica:</p>
<p>cont_per = “3” OR cont_per LIKE “3/%” OR cont_per LIKE “%/3” OR cont_per LIKE “%/3/%”</p>
<figure class="align-center" id="id12">
<img alt="_images/img_3231r.png" src="_images/img_3231r.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.12 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id12" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Sul campo cont_per viene cercato il codice di periodizzazione in quattro modalità:</p>
<p>1. cont_per = valore: trova tutte le US che vivono solo nel periodo preso in esame;
cont_per LIKE “valore/%”: trova tutte le US che iniziano in un certo periodo e arrivano fino
ai periodi successivi;
3. cont_per LIKE “%/valore”: trova tutte le US che finiscono in un certo periodo e iniziano nei
periodi precedenti;
4. cont_per LIKE “%/valore/%”: trova tutte le US che afferiscono ad un periodo intermedio tra un periodo iniziale e uno finale.</p>
<figure class="align-center" id="id13">
<img alt="_images/img_3231r1.png" src="_images/img_3231r1.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.13 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id13" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="sistema-di-generazione-di-piante-composite-a-partire-dalle-query-della-scheda-us">
<h2><span class="section-number">7.5. </span>Sistema di generazione di piante composite a partire dalle query della scheda US<a class="headerlink" href="#sistema-di-generazione-di-piante-composite-a-partire-dalle-query-della-scheda-us" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Andate nella sezione Tools della scheda US e cliccare sul pulsante “Visualizzazione GIS”; apparirà un messaggio che vi informa che le vostre ricerche saranno trasformate in piante di scavo.</p></li>
</ol>
<figure class="align-center" id="id14">
<img alt="_images/img_3231a.png" src="_images/img_3231a.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.14 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id14" title="Link to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="2">
<li><p>Dopo aver cliccato su “New Search” impostate una ricerca (in questo caso cerchiamo la struttura TB01 – una tomba, di uno scavo di Ravenna).</p></li>
</ol>
<figure class="align-center" id="id15">
<img alt="_images/img_3231b.png" src="_images/img_3231b.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.15 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id15" title="Link to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="3">
<li><p>Lanciate la ricerca cliccando su “Search!!!”.</p></li>
</ol>
<figure class="align-center" id="id16">
<img alt="_images/img_3231c.png" src="_images/img_3231c.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.16 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id16" title="Link to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="4">
<li><p>Sul GIS vengono caricate le US corrispondenti alla ricerca, caratterizzate in base agli stili pre-impostati di Qgis (vedi capitolo sugli stili); nella scheda US invece sono disponibili i singoli record.</p></li>
</ol>
<figure class="align-center" id="id17">
<img alt="_images/img_3231d.png" src="_images/img_3231d.png" />
<figcaption>
<p><span class="caption-number">Fig. 7.17 </span><span class="caption-text">:descrizione</span><a class="headerlink" href="#id17" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="controllo-automatico-dei-rapporti-stratigrafici">
<h2><span class="section-number">7.6. </span>Controllo automatico dei rapporti stratigrafici<a class="headerlink" href="#controllo-automatico-dei-rapporti-stratigrafici" title="Link to this heading"></a></h2>
<p>Nella sezione Tools, selezionando uno scavo, è possibile eseguire il controllo sui rapporti stratigrafici.</p>
<p>Gli errori nell’inserimento delle US possono essere di vari tipi. Ecco elencate alcune casistiche:</p>
<ol class="arabic simple">
<li><p>tipo di rapporto fisico errato;</p></li>
<li><p>numero del rapporto errato;</p></li>
<li><p>tipo di rapporto e numero errati;</p></li>
<li><p>tipo di rapporto non inserito;</p></li>
<li><p>numero del rapporto non inserito;</p></li>
<li><p>tipo di rapporto fisico e numero non inseriti (equivale a non inserire il rapporto, dato che pyarchinit elimina il record vuoto nel campo rapporti);</p></li>
<li><p>tipo di rapporto non corrispondente con la definizione stratigrafica (Esempio: uno strato di argilla che taglia un muro);</p></li>
<li><p>rapporto tra 2 US che non hanno una sovrapposizione o adiacenza topografica che giustifichi il rapporto, sia in verticale che in orizzontale. Per esempio due strati che hanno i propri limiti a metri di distanza; uno strato individuato ad inizio scavo di spessore di pochi centimetri che copre un livello che si trova diversi metri più in basso;</p></li>
<li><p>reciproco non inserito. Esempio 1 copre 2, ma 2 non è coperto da 1. In realtà potrebbe dipendere da errori sopraelencati;</p></li>
<li><p>numero di US inserita nel rapporto che non corrisponde ad una scheda US.</p></li>
<li><p>US più antiche che ricevono un rapporto di sovrapposizione temporale rispetto ad US più recenti. Esempio: un muro di epoca romana che copre una pavimentazione medievale.</p></li>
<li><p>Medesimo rapporto fisico inserito nelle due US coinvolte: 1 copre 2, 2 copre 1.</p></li>
</ol>
<p>Le casistiche sopradescritte dipendono in prevalenza da errori di immissione o banalmente di distrazione. E” stato osservato come in scavi da 30 US e circa 100 rapporti stratigrafici, in media emergano, anche dopo un ricontrollo autoptico, tra uno e 3-4 errori.</p>
<p>La strada scelta al momento da pyArchInit è quella di non correggere in automatico gli errori, dato che non è possibile evincere in automatico dove risieda l’errore. Per esempio potrei avere un problema di assenza di reciproci (caso 9), ma l’assenza potrebbe dipendere o da una dimenticanza nell’inserire i rapporti o da una effettiva non necessità di inserimento dovuta all’assenza di rapporti topografici (caso 8).</p>
<p>Per questi motivi  al momento viene generato un semplice report di testo in cui si segnala se la scheda corrispondente esiste (caso 10) o se il rapporto stratigrafico è rispettato (caso 9).</p>
<p>Riportiamo di seguito un esempio di controllo lanciato su uno scavo a fine giornata.
Vengono generati 2 report:</p>
<ol class="arabic simple">
<li><p>rapporti_us.txt: verifica sia i reciproci che l’assenza di schede US.</p></li>
<li><p>def_strat_a_rapporti_US.txt: verifica la concordanza tra il rapporto stratigrafico e la definizione stratigrafica.</p></li>
</ol>
<p>I report sono esportati nella cartella pyarchinit_report_forlder che si trova sotto al vostro Utente e si chiama rapporti_us.txt :</p>
<p>rapporti_us.txt
Report controllo Rapporti Stratigrafici - Sito: Via Cignani, 18 Rimini
Sito: “Via Cignani, 18 Rimini “, #Area: “1”, #US: 2 Coperto da US: 15: Rapporto non verificato
Sito: “Via Cignani, 18 Rimini “, #Area: “1”, #US: 2 Taglia US: 16: Rapporto non verificato
Sito: “Via Cignani, 18 Rimini “, #Area: “1”, #US: 1007 Taglia US: 977: Scheda US non esistente
Sito: “Via Cignani, 18 Rimini “, #Area: “1”, #US: 256 Riempie US: 255: Scheda US non esistente</p>
<p>def_strat_a_rapporti_US.txt
Sito: “Via Cignani, 18 Rimini “, #Area: “1”, US: 128 - “Riempimento”: lo strato Si lega a US: 127 - “Strato di argilla”</p>
<p>Il sistema funziona per una singola accoppiata Sito - Area di scavo. Per lanciarlo non è necessario fare una query, ma è stata creato un sistema con 2 liste a tendina, sito e area, nella sezione Tools (NB: cliccando sull’icona con la doppia scheda è possibie «staccare» la finestra e usarla in maniera indipendente dalla scheda US)</p>
<p>A questo punto basta selezionare Sito e Area di scavo e lanciare il comando Check Go!!!</p>
<p>A questo punto basta andare ad aprire i relativi files e iniziare a verificare i rapporti. E” possibile per fare questo anche tenersi aperto il matrix interattivo per disegnare le US su Qgis. Nell’esempio sotto riportato, Abbiamo verificato perchè il sistema ci riporta l’errore US6 Gli si appoggia US12. Accendendo su Qgis le US possiamo verificare che vi sia adiacenza topografica, quindi il rapporto è possibile, mentre aprendo la scheda US di US12, vediamo che è stato inserito il medesimo rapporto US12 Gli si appoggia US6. A questo punto solo l’archeologo è in grado di capire come risolvere il paradosso e da cosa può dipendere.</p>
</section>
<section id="esportazione-del-matrix-di-harris">
<h2><span class="section-number">7.7. </span>Esportazione del matrix di Harris<a class="headerlink" href="#esportazione-del-matrix-di-harris" title="Link to this heading"></a></h2>
<p>È possibile realizzare dei diagrammi stratigrafici che espongano la successione stratigrafica di qualsiasi istanza del database dopo una ricerca. Il sistema esporta due formati: un’immagine raster in .png e un vettoriale .svg modificabile. L’aspetto del matrix ovviamente tende ad essere ordinato quante meno US sono presenti. Tuttavia un primo tentativo di migliorare l’aspetto del diagramma ottenuto è stato rappresentato dall’aggiunta del raggruppamento per insiemi delle US basate sulla periodizzazione.
Dopo aver realizzato una ricerca sulla scheda US cliccare sul pulsante “Export Matrix”. Il matrix viene salvato all’interno della cartella pyarchinit_Matrix_folder all’interno del vostro utente.</p>
<p>Nell’esempio seguente mostriamo due semplici passaggi per avere pianta di struttura e matrix in 2 semplici passaggi:</p>
<ol class="arabic simple">
<li><p>Nella scheda US con il visualizzatore delle geometrie attivo cerchiamo l’ED01 del nostro scavo. In automatico su Qgis appare la pianta e nelle schede US appaiono solo i record corrispondenti ad ED01.</p></li>
<li><p>Andare nella sezione Tools e cliccare su “Export Matrix”</p></li>
<li><p>Viene esportato il matrix in formato .png e .svg e si trovano all’interno della cartella pyarchinit_Matrix_folder sotto al vostro Utente.</p></li>
</ol>
<p>I files possono essere gestiti sia tramite GIMP che Inkscape, mentre, seguendo il blog a questo indirizzo è possibile trasformare il Matrix in un grafico interattivo tramite Yed.</p>
<p>Vai alla pagina del Blog <a class="reference external" href="http://pyarchinit.blogspot.it/2015/04/this-afternoon-im-thinking-about-issues.html">a link</a>.</p>
</section>
<section id="creazione-dell-indice-di-ordine-di-successione-stratigrafica">
<h2><span class="section-number">7.8. </span>Creazione dell’indice di ordine di successione stratigrafica<a class="headerlink" href="#creazione-dell-indice-di-ordine-di-successione-stratigrafica" title="Link to this heading"></a></h2>
<p>L’indice di successione stratigrafica è stato ideato per poter ovviare alla visualizzazione del GIS, che sovrappone i poligoni in base al loro ordine di immissione all’interno del database.</p>
<p>L’algoritmo realizzato (al momento altamente in via di sviluppo) crea un ordine di successione stratigrafica basato sui rapporti stratigrafici. Ogni US assume un valore univoco in base alla sua posizione nella stratigrafia e dai rapporti che ha con altre US.
Per esempio, se 1 copre 2, 2 copre 3 e 4, ma 3 e 4 non hanno rapporti tra di loro lo script genererà i seguenti valori:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>US</p></th>
<th class="head"><p>Rapporto</p></th>
<th class="head"><p>Ordine di successione stratigrafica</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Copre 2</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Copre 3 e 4</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Coperto da 2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Coperto da 2</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
<p>Questo permetterà alla View SQL di visualizzare su base GIS le geometrie degli strati nel loro ordine stratigrafico originario, senza doversi preoccupare delle modalità di disegno delle US.</p>
<p>Il sistema funziona per singola Area di scavo. Quindi è necessario prima di tutto eseguire una ricerca che richiamo solo un’area di scavo di un sito. Dopo aver cliccato su nuova ricerca, basta inserire nome del sito e numero di Area.</p>
<p>A questo punto sarà necessario nella sezione Tools cliccare su “Ordine Stratigrafico”.</p>
<p>NOTA BENE: Il sistema funziona solo se due condizioni sono verificate
* Assenza di errori nell’inserimento dei rapporti stratigrafici
* Accordo con il valore di loop che esegue il software in fase di analisi dell stratigrafia. Questo è un parametro tecnico ed è settato a livello di codice su 500 Loop; questo implica che una singola US, per ogni singolo rapporto, viene scansionata 500 Volte. Se una US ha più di 500 rapporti, è possibile che il sistema non riesca a completare il ciclo. Al momento è stata testata su scavi aperti di estensione sotto gli 800 mq e in contesti urbani complessi e il sistema ha sempre funzionato. Se si riscontrassero problema, ovvero il sistema non esce dal loop, è necessario modificare il parametro nel codice in python. Dato che dai loop dipende anche la velocità di esecuzione, in futuro si potrebbe aggiungere una casella dove si setta manualmente il numero di loop massimo per singola US. Va considerato che per un pacchetto di circa 40 US in ambito urbano, il sistema richiede circa un minuto di lavoro, che aumenta progressivamente all’aumentare delle US e dei rapporti inseriti.</p>
<p>Il sistema manda invia all’utente una serie di messaggi (utilizzati per il debug del sistema), tra cui la richiesta di eseguire il matrix per verificare eventuali paradossi nella stratigrafia come US più antiche che coprono US più recenti.</p>
<p>Lanciando il matrix sarà possibile verificare la correttezza dei rapporti tramite l’immagine esportata nella cartella pyarchinit_Matrix_folder che si trova sotto al vostro Utente, e richiamare dal Matrix interattivo le US cliccando sul singolo numero, per poter verificare sovrapposizioni corrette, a quale US si fa riferimento, ecc..</p>
<p>Al messaggio «Inizio Sistema order layer» dare OK; «Uscita dal sistema order layer», dare OK ed attendere, senza impegnare il PC in altre operazioni. A volte possono servire anche 15 minuti per grandi scavi ( ma ne vale la pena!!!).</p>
<p>E” necessario attendere il messaggio «SISEMA DI ORDINAMENTO TERMINATO».</p>
<p>ATTENZIONE!!! Per motivi prettamente informatici, il sistema ricarica tutte le US del Database. Richiamate il vostro set di dati.</p>
<p>Se qualcosa fosse andato storto e per essere sicuri che il vostro scavo sia documentato in maniera corretta, è possibile verificare una serie di report che vengono estratti dal sistema di ordinamento. Si trovano all’interno di pyArchinIt Report_Folder sotto al vostro Utente.</p>
<p>Ecco come appare il layer di inserimento delle Unità Stratigrafiche (pyunitastrigrafiche) alla fine della digitalizzazione di tutte le US.</p>
<p>Ecco Il layer di visualizzazione delle Unità Stratigrafiche (pyarchinit_us_view) dopo la generazione dell’ordine stratigrafico pronto per essere esportato.</p>
<p>PROBLEMI NOTI: se si lancia il comando e sono presenti paradossi è possibile che il sistema non riuscendo a risolverli vada avanti all’infito. Oppure se si lancia il sistema su più Aree di uno scavo o su più scavi, il sistema va in loop e non c’è modo di abortire il processo. In tutti questi casi è necessario forzare l’arresto di Qgis.</p>
</section>
<section id="esportazione-schede-e-indice-delle-us-in-formato-pdf">
<h2><span class="section-number">7.9. </span>Esportazione schede e indice delle US in formato PDF<a class="headerlink" href="#esportazione-schede-e-indice-delle-us-in-formato-pdf" title="Link to this heading"></a></h2>
<p>È possibile esportare sia le singole schede che l’indice delle US basandosi su qualsiasi ricerca o criterio di ordinamento. Alcuni dati vengono presi direttamente dalla us_table, mentre altri, come la quota minima e massima, sono ricavati per relazione dalle features dei layers.</p>
<p>Le modalità per esportare le schede sono molteplici. E” possibile fare una ricerca in scheda, oppure una ricerca sui layer in Qgis e visualizzare le US corrispondenti in scheda ed esportarle. I criteri di esportazione sono pressochè illimitati, potendo cercare su vari campi ed ordinare le schede in base a più modalità. Per esempio si potrebbero cercare tutte le schede relative al Medioevo ed esportare tutte le US ordinate per scavo e tipo di defizione. Un medesimo set di dati può essere esportato secondo ordinamenti differenti, dando la possibilità di creare elenchi consultabili secondo vari criteri.</p>
<p>Nell’esempio sottostante abbiamo cercato in scheda l’ED01 di un nostro scavo, selezionato a video le US che ci interessavano e aperto le schede US. Infine le abbiamo ordinate per numero di US.</p>
<p>Ora basta andare in sezione Tools -&gt; Esportazione ed esportare Schede e Indice.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Piè di pagina">
        <a href="le_schede.html" class="btn btn-neutral float-left" title="6. Le schede" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Precedente</a>
        <a href="come_documentare.html" class="btn btn-neutral float-right" title="8. Come documentare" accesskey="n" rel="next">Prossimo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, AdArte srl.</p>
  </div>

  Realizzato con <a href="https://www.sphinx-doc.org/">Sphinx</a> e il tema
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    fornito da <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>